#
# LiNiO <linio@wonder.pl> - 2005.01.15
# 2005.08.12 - je¶li warto¶æ siê nie zmieni³a, nie wy¶wietla jej ponownie - usuniêcie efektu "migotania"

WindowTitle {FvwmScript-CpuTemp}
WindowSize 48 24
Font "xft:Tahoma:pixelsize=12:Bold"
Colorset 1

Init
Begin
  Set $temp_prev = 1
  Set $temp = (GetOutput {cat /proc/acpi/thermal_zone/TH*/temperature} 1 2)
  Set $tmp = $temp °C
  ChangeTitle 1 $tmp
End

PeriodicTasks
Begin 
 If (RemainderOfDiv (GetTime) 2)==0 Then
 Begin
  Set $temp = (GetOutput {cat /proc/acpi/thermal_zone/TH*/temperature} 1 2) 
  Set $tmp = $temp °C

  If $temp==$temp_prev Then
  Begin
    # do nothing
  End
  Else
  Begin

    If $temp>89 Then
      ChangeForeColor 1 {#FF0000}
    Else
      Begin
      If $temp>79 Then
        ChangeForeColor 1 {#FF4400}
      Else
        Begin
        If $temp>69 Then
          ChangeForeColor 1 {#FF8800}
        Else
          Begin
          If $temp>59 Then
            ChangeForeColor 1 {#FFBB00}
          Else
  	  Begin
            If $temp>49 Then
              ChangeForeColor 1 {#FFFF00}
            Else
              ChangeColorset 1 1
            End
          End
        End
      End
      
      ChangeTitle 1 $tmp
    End
  Set $temp_prev = $temp
  End
End

Widget 1
Property
Position 0 -2
Size 48 24
Type ItemDraw
Flags NoReliefString
Title {}
Colorset 1
Main
Case message of
 SingleClic :
 Begin
 End
End

